"use strict";(globalThis.webpackChunktemp_docusaurus=globalThis.webpackChunktemp_docusaurus||[]).push([[7636],{4066:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>d,frontMatter:()=>r,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"module-3-ai-brain/navigation-stack","title":"Nav2 Architecture","description":"1. Moving from A to B","source":"@site/docs/module-3-ai-brain/02-navigation-stack.md","sourceDirName":"module-3-ai-brain","slug":"/module-3-ai-brain/navigation-stack","permalink":"/Physical-AI-Humanoid-Robotics-Book/docs/module-3-ai-brain/navigation-stack","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/module-3-ai-brain/02-navigation-stack.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"Nav2 Architecture"},"sidebar":"textbookSidebar","previous":{"title":"The Isaac Ecosystem","permalink":"/Physical-AI-Humanoid-Robotics-Book/docs/module-3-ai-brain/intro"},"next":{"title":"Visual SLAM","permalink":"/Physical-AI-Humanoid-Robotics-Book/docs/module-3-ai-brain/visual-slam"}}');var a=o(4848),i=o(8453);const r={sidebar_position:2,title:"Nav2 Architecture"},s="Nav2: The Navigation Stack",l={},c=[{value:"1. Moving from A to B",id:"1-moving-from-a-to-b",level:2},{value:"1.1 The Architecture",id:"11-the-architecture",level:3},{value:"2. Costmaps: The World Representation",id:"2-costmaps-the-world-representation",level:2},{value:"2.1 Inflation Layer",id:"21-inflation-layer",level:3},{value:"3. Behavior Trees (BT)",id:"3-behavior-trees-bt",level:2},{value:"4. MPPI for Humanoids",id:"4-mppi-for-humanoids",level:2}];function h(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"nav2-the-navigation-stack",children:"Nav2: The Navigation Stack"})}),"\n",(0,a.jsx)(n.h2,{id:"1-moving-from-a-to-b",children:"1. Moving from A to B"}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Nav2"}),' is the industry-standard navigation framework for ROS 2. It turns a "Goal Pose" (x, y, theta) into motor commands, while avoiding obstacles.']}),"\n",(0,a.jsx)(n.h3,{id:"11-the-architecture",children:"1.1 The Architecture"}),"\n",(0,a.jsx)(n.p,{children:"Nav2 is not a single node; it is a collection of servers managed by a Behavior Tree."}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Global Planner"}),": Calculates the path from Start to Goal.","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.em,{children:"Algorithms"}),": Dijkstra, A* (A-Star), Smac Planner (Hybrid A*)."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.em,{children:"Map"}),": Uses the Static Map (from SLAM)."]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Local Planner (Controller)"}),": Follows the path while avoiding dynamic obstacles (people, dogs).","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.em,{children:"Algorithms"}),": DWB (Dynamic Window Approach), MPPI (Model Predictive Path Integral)."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.em,{children:"Map"}),": Uses the Local Costmap (rolling window)."]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Recoveries (Behaviors)"}),": What to do if stuck.","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.em,{children:"Examples"}),": Spin in place, back up, clear costmap."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"2-costmaps-the-world-representation",children:"2. Costmaps: The World Representation"}),"\n",(0,a.jsxs)(n.p,{children:["A ",(0,a.jsx)(n.strong,{children:"Costmap"})," is a 2D grid where each cell has a value (0-255)."]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"0"}),": Free space (Safe)."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"254"}),": Lethal Obstacle (Wall)."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"255"}),": Unknown."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"1-253"}),": Inflation Radius (Danger zone near walls)."]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"21-inflation-layer",children:"2.1 Inflation Layer"}),"\n",(0,a.jsx)(n.p,{children:'Robots are not points; they have a radius. The Inflation Layer adds a "buffer" around obstacles so the center of the robot doesn\'t get too close to the wall.'}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"3-behavior-trees-bt",children:"3. Behavior Trees (BT)"}),"\n",(0,a.jsxs)(n.p,{children:["Nav2 uses an XML-based ",(0,a.jsx)(n.strong,{children:"Behavior Tree"})," to orchestrate the logic. This is more flexible than a state machine."]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Example Logic:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-xml",children:'<root main_tree_to_execute="MainTree">\n  <BehaviorTree ID="MainTree">\n    <RecoveryNode number_of_retries="6">\n      <PipelineSequence name="NavigateWithReplanning">\n        \n        \x3c!-- Every 1s, plan a new path --\x3e\n        <RateController hz="1.0">\n          <ComputePathToPose goal="{goal}" path="{path}"/>\n        </RateController>\n\n        \x3c!-- Follow the path --\x3e\n        <FollowPath path="{path}" controller_id="FollowPath"/>\n        \n      </PipelineSequence>\n\n      \x3c!-- If failed, try to recover --\x3e\n      <Sequence name="RecoveryActions">\n        <ClearEntireCostmap name="ClearLocalCostmap"/>\n        <Spin spin_dist="1.57"/>\n        <Wait wait_duration="5"/>\n      </Sequence>\n      \n    </RecoveryNode>\n  </BehaviorTree>\n</root>\n'})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Translation"}),': "Try to plan and follow a path. If that fails, clear the map, spin around to look for a way out, wait 5 seconds, and try again. Do this 6 times before giving up."']}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"4-mppi-for-humanoids",children:"4. MPPI for Humanoids"}),"\n",(0,a.jsx)(n.p,{children:"For humanoid robots, standard controllers (DWB) often fail because they assume a circular or rectangular footprint that moves smoothly."}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"MPPI (Model Predictive Path Integral)"})," is a predictive controller that:"]}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Simulates thousands of random trajectories into the future on the GPU."}),"\n",(0,a.jsx)(n.li,{children:"Scores them (low cost = good, hit wall = bad)."}),"\n",(0,a.jsx)(n.li,{children:"Executes the weighted average of the best paths."}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"MPPI is robust for erratic movement and is highly recommended for legged robots."})]})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}},8453:(e,n,o)=>{o.d(n,{R:()=>r,x:()=>s});var t=o(6540);const a={},i=t.createContext(a);function r(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);