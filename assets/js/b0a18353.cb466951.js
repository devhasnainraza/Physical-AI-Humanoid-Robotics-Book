"use strict";(globalThis.webpackChunkcortex_h1=globalThis.webpackChunkcortex_h1||[]).push([[6036],{3035:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"labs/lab-1-ros2-dev-env","title":"Lab 1: Setting up Your ROS 2 Development Environment","description":"Objective","source":"@site/docs/labs/lab-1-ros2-dev-env.md","sourceDirName":"labs","slug":"/labs/lab-1-ros2-dev-env","permalink":"/Cortex-H1/docs/labs/lab-1-ros2-dev-env","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/labs/lab-1-ros2-dev-env.md","tags":[],"version":"current","frontMatter":{"id":"lab-1-ros2-dev-env","title":"Lab 1: Setting up Your ROS 2 Development Environment","sidebar_label":"Lab 1: ROS 2 Dev Env"},"sidebar":"textbookSidebar","previous":{"title":"7.3 Lab: Safety","permalink":"/Cortex-H1/docs/module-7-hri/safety-standards"},"next":{"title":"Lab 2: URDF Modeling","permalink":"/Cortex-H1/docs/labs/lab-2-urdf-modeling"}}');var r=s(4848),l=s(8453);const t={id:"lab-1-ros2-dev-env",title:"Lab 1: Setting up Your ROS 2 Development Environment",sidebar_label:"Lab 1: ROS 2 Dev Env"},o="Lab 1: Setting up Your ROS 2 Development Environment",a={},c=[{value:"Objective",id:"objective",level:2},{value:"Theoretical Background",id:"theoretical-background",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Step-by-Step Instructions",id:"step-by-step-instructions",level:2},{value:"Step 1: Open Your Development Container",id:"step-1-open-your-development-container",level:3},{value:"Step 2: Create a ROS 2 Workspace",id:"step-2-create-a-ros-2-workspace",level:3},{value:"Step 3: Create a Custom ROS 2 Package",id:"step-3-create-a-custom-ros-2-package",level:3},{value:"Step 4: Write a Simple Publisher Node",id:"step-4-write-a-simple-publisher-node",level:3},{value:"Step 5: Write a Simple Subscriber Node",id:"step-5-write-a-simple-subscriber-node",level:3},{value:"Step 6: Update <code>setup.py</code> and <code>package.xml</code>",id:"step-6-update-setuppy-and-packagexml",level:3},{value:"Step 7: Build Your Package",id:"step-7-build-your-package",level:3},{value:"Step 8: Source the Workspace and Run Nodes",id:"step-8-source-the-workspace-and-run-nodes",level:3},{value:"Verification",id:"verification",level:2},{value:"Challenge Questions",id:"challenge-questions",level:2}];function d(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"lab-1-setting-up-your-ros-2-development-environment",children:"Lab 1: Setting up Your ROS 2 Development Environment"})}),"\n",(0,r.jsx)(n.h2,{id:"objective",children:"Objective"}),"\n",(0,r.jsx)(n.p,{children:'The goal of this lab is to establish a functional ROS 2 Humble development environment. You will create a ROS 2 workspace, a custom package, and compile and run a simple "Hello World" ROS 2 publisher and subscriber.'}),"\n",(0,r.jsx)(n.h2,{id:"theoretical-background",children:"Theoretical Background"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"ROS 2 (Robot Operating System 2)"})," is not an operating system, but a set of software libraries and tools that help you build robot applications. It provides a standardized way for different parts of a robot's software (nodes) to communicate with each other (topics, services, actions) using a DDS (Data Distribution Service) middleware."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Workspace"}),": A directory where you store and build ROS 2 packages."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Package"}),": The fundamental unit of ROS 2 software, containing nodes, libraries, configuration files, and launch files."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Node"}),": An executable process that performs a specific task (e.g., a sensor driver, a motor controller, a planning algorithm)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Topic"}),": A named channel over which nodes exchange messages (publish/subscribe communication)."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"WSL2/Ubuntu 22.04 LTS"}),": As per Chapter 6."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"ROS 2 Humble"}),": Installed on your Ubuntu system.","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["If not installed, follow the official documentation: ",(0,r.jsx)(n.a,{href:"https://docs.ros.org/en/humble/Installation/Ubuntu-Install-Debians.html",children:"docs.ros.org/en/humble/Installation/Ubuntu-Install-Debians.html"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"VS Code/Cursor"}),": With the Dev Containers extension configured."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"step-by-step-instructions",children:"Step-by-Step Instructions"}),"\n",(0,r.jsx)(n.h3,{id:"step-1-open-your-development-container",children:"Step 1: Open Your Development Container"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Launch VS Code or Cursor."}),"\n",(0,r.jsxs)(n.li,{children:["Open the root folder of this book project (",(0,r.jsx)(n.code,{children:"Physical-AI-Humanoid-Robotics-Book"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:['If prompted, click "Reopen in Container" to launch your pre-configured Dev Container. If not prompted, open the Command Palette (',(0,r.jsx)(n.code,{children:"Ctrl+Shift+P"})," or ",(0,r.jsx)(n.code,{children:"Cmd+Shift+P"}),') and select "Dev Containers: Reopen in Container".']}),"\n",(0,r.jsxs)(n.li,{children:["Once the container is running and your terminal is open, you should be inside a Linux environment with ROS 2 Humble sourced. Verify by typing:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"printenv | grep ROS_DISTRO\n"})}),"\n","You should see ",(0,r.jsx)(n.code,{children:"ROS_DISTRO=humble"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"step-2-create-a-ros-2-workspace",children:"Step 2: Create a ROS 2 Workspace"}),"\n",(0,r.jsx)(n.p,{children:"It's good practice to create a dedicated workspace for your custom packages."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"mkdir -p ~/ros2_ws/src\ncd ~/ros2_ws\n"})}),"\n",(0,r.jsx)(n.h3,{id:"step-3-create-a-custom-ros-2-package",children:"Step 3: Create a Custom ROS 2 Package"}),"\n",(0,r.jsxs)(n.p,{children:["We'll create a Python package named ",(0,r.jsx)(n.code,{children:"my_robot_controller"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws/src\nros2 pkg create --build-type ament_python my_robot_controller\n"})}),"\n",(0,r.jsx)(n.h3,{id:"step-4-write-a-simple-publisher-node",children:"Step 4: Write a Simple Publisher Node"}),"\n",(0,r.jsxs)(n.p,{children:["Navigate into your new package's directory (",(0,r.jsx)(n.code,{children:"~/ros2_ws/src/my_robot_controller"}),").\nCreate a file named ",(0,r.jsx)(n.code,{children:"my_robot_controller/publisher_member_function.py"})," and add the following Python code:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\nclass MinimalPublisher(Node):\n\n    def __init__(self):\n        super().__init__('minimal_publisher')\n        self.publisher_ = self.create_publisher(String, 'topic', 10)\n        timer_period = 0.5  # seconds\n        self.timer = self.create_timer(timer_period, self.timer_callback)\n        self.i = 0\n\n    def timer_callback(self):\n        msg = String()\n        msg.data = 'Hello ROS 2! Count: %d' % self.i\n        self.publisher_.publish(msg)\n        self.get_logger().info('Publishing: \"%s\"' % msg.data)\n        self.i += 1\n\ndef main(args=None):\n    rclpy.init(args=args) # Initialize ROS 2 communication\n    minimal_publisher = MinimalPublisher() # Create the node\n    rclpy.spin(minimal_publisher) # Keep the node alive\n    minimal_publisher.destroy_node() # Destroy node on shutdown\n    rclpy.shutdown() # Shutdown ROS 2 communication\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Code Explanation"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"rclpy.init(args=args)"}),": Initializes the ROS 2 Python client library."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"MinimalPublisher(Node)"}),": Our node inherits from ",(0,r.jsx)(n.code,{children:"rclpy.node.Node"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"super().__init__('minimal_publisher')"}),": Initializes the node with the name ",(0,r.jsx)(n.code,{children:"minimal_publisher"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"self.create_publisher(String, 'topic', 10)"}),": Creates a publisher that sends ",(0,r.jsx)(n.code,{children:"String"})," messages on a topic named ",(0,r.jsx)(n.code,{children:"'topic'"})," with a queue size of 10."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"self.create_timer(timer_period, self.timer_callback)"}),": Sets up a timer to call ",(0,r.jsx)(n.code,{children:"timer_callback"})," every ",(0,r.jsx)(n.code,{children:"0.5"})," seconds."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"self.publisher_.publish(msg)"}),": Publishes the message."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"rclpy.spin(minimal_publisher)"}),": Keeps the node running until interrupted."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"step-5-write-a-simple-subscriber-node",children:"Step 5: Write a Simple Subscriber Node"}),"\n",(0,r.jsxs)(n.p,{children:["In the same ",(0,r.jsx)(n.code,{children:"my_robot_controller"})," package, create a file named ",(0,r.jsx)(n.code,{children:"my_robot_controller/subscriber_member_function.py"})," and add the following Python code:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\nclass MinimalSubscriber(Node):\n\n    def __init__(self):\n        super().__init__('minimal_subscriber')\n        self.subscription = self.create_subscription(\n            String,\n            'topic',\n            self.listener_callback,\n            10)\n        self.subscription  # prevent unused variable warning\n\n    def listener_callback(self, msg):\n        self.get_logger().info('I heard: \"%s\"' % msg.data)\n\ndef main(args=None):\n    rclpy.init(args=args)\n    minimal_subscriber = MinimalSubscriber()\n    rclpy.spin(minimal_subscriber)\n    minimal_subscriber.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Code Explanation"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"self.create_subscription(String, 'topic', self.listener_callback, 10)"}),": Creates a subscriber that listens for ",(0,r.jsx)(n.code,{children:"String"})," messages on the ",(0,r.jsx)(n.code,{children:"'topic'"})," topic. When a message arrives, it calls ",(0,r.jsx)(n.code,{children:"self.listener_callback"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"self.get_logger().info(...)"}),": Prints the received message to the console."]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"step-6-update-setuppy-and-packagexml",children:["Step 6: Update ",(0,r.jsx)(n.code,{children:"setup.py"})," and ",(0,r.jsx)(n.code,{children:"package.xml"})]}),"\n",(0,r.jsx)(n.p,{children:"These files define your package's metadata and executables."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsxs)(n.strong,{children:["Update ",(0,r.jsx)(n.code,{children:"~/ros2_ws/src/my_robot_controller/setup.py"})]}),":\nAdd the ",(0,r.jsx)(n.code,{children:"entry_points"})," section. Locate the ",(0,r.jsx)(n.code,{children:"data_files"})," section and add these lines:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"entry_points={\n    'console_scripts': [\n        'talker = my_robot_controller.publisher_member_function:main',\n        'listener = my_robot_controller.subscriber_member_function:main',\n    ],\n},\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsxs)(n.strong,{children:["Update ",(0,r.jsx)(n.code,{children:"~/ros2_ws/src/my_robot_controller/package.xml"})]}),":\nAdd the following dependencies if they are not already there (they should be generated by default):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:"  <depend>rclpy</depend>\n  <depend>std_msgs</depend>\n"})}),"\n",(0,r.jsx)(n.h3,{id:"step-7-build-your-package",children:"Step 7: Build Your Package"}),"\n",(0,r.jsx)(n.p,{children:"Navigate back to your workspace root and build your package:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws\ncolcon build --packages-select my_robot_controller\n"})}),"\n",(0,r.jsx)(n.p,{children:"If the build is successful, you will see output indicating your package was built."}),"\n",(0,r.jsx)(n.h3,{id:"step-8-source-the-workspace-and-run-nodes",children:"Step 8: Source the Workspace and Run Nodes"}),"\n",(0,r.jsx)(n.p,{children:'You need to "source" your workspace to make your new executables available to ROS 2.'}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:". install/setup.bash\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Now, open ",(0,r.jsx)(n.em,{children:"two new terminal tabs"})," in your Dev Container. In each new tab, you will also need to source the setup file:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# In each new terminal tab\n. ~/ros2_ws/install/setup.bash\n"})}),"\n",(0,r.jsxs)(n.p,{children:["In the ",(0,r.jsx)(n.strong,{children:"first new terminal tab"}),", run the publisher:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 run my_robot_controller talker\n"})}),"\n",(0,r.jsxs)(n.p,{children:["In the ",(0,r.jsx)(n.strong,{children:"second new terminal tab"}),", run the subscriber:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 run my_robot_controller listener\n"})}),"\n",(0,r.jsx)(n.p,{children:'You should see the publisher sending "Hello ROS 2!" messages and the subscriber printing "I heard!" messages.'}),"\n",(0,r.jsx)(n.h2,{id:"verification",children:"Verification"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:'Publisher prints "Publishing: ..." messages.'}),"\n",(0,r.jsx)(n.li,{children:'Subscriber prints "I heard: ..." messages.'}),"\n",(0,r.jsxs)(n.li,{children:["Run ",(0,r.jsx)(n.code,{children:"ros2 topic list"})," in a third terminal. You should see ",(0,r.jsx)(n.code,{children:"/topic"})," listed."]}),"\n",(0,r.jsxs)(n.li,{children:["Run ",(0,r.jsx)(n.code,{children:"ros2 node list"}),". You should see ",(0,r.jsx)(n.code,{children:"minimal_publisher"})," and ",(0,r.jsx)(n.code,{children:"minimal_subscriber"})," listed."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"challenge-questions",children:"Challenge Questions"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Change the ",(0,r.jsx)(n.code,{children:"timer_period"})," in the publisher to ",(0,r.jsx)(n.code,{children:"0.1"})," seconds. Rebuild and see the effect."]}),"\n",(0,r.jsxs)(n.li,{children:["Change the topic name in both nodes and ",(0,r.jsx)(n.code,{children:"setup.py"}),". What happens if you don't change both?"]}),"\n",(0,r.jsxs)(n.li,{children:["Implement a simple service in the ",(0,r.jsx)(n.code,{children:"my_robot_controller"})," package. (Hint: Use ",(0,r.jsx)(n.code,{children:"ros2 service call"})," to test it)."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>o});var i=s(6540);const r={},l=i.createContext(r);function t(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);