"use strict";(globalThis.webpackChunktemp_docusaurus=globalThis.webpackChunktemp_docusaurus||[]).push([[666],{8453:(e,n,i)=>{i.d(n,{R:()=>s,x:()=>t});var o=i(6540);const r={},l=o.createContext(r);function s(e){const n=o.useContext(l);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),o.createElement(l.Provider,{value:n},e.children)}},8690:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>t,default:()=>h,frontMatter:()=>s,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"module-1-ros2/urdf-modeling","title":"Modeling Robots with URDF","description":"1. What is URDF?","source":"@site/docs/module-1-ros2/03-urdf-modeling.md","sourceDirName":"module-1-ros2","slug":"/module-1-ros2/urdf-modeling","permalink":"/Cortex-H1/docs/module-1-ros2/urdf-modeling","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/module-1-ros2/03-urdf-modeling.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"title":"Modeling Robots with URDF"},"sidebar":"textbookSidebar","previous":{"title":"Advanced Agents: The Follow Me Logic","permalink":"/Cortex-H1/docs/module-1-ros2/python-agents"},"next":{"title":"Lab: Build a 6-DOF Leg","permalink":"/Cortex-H1/docs/module-1-ros2/lab-urdf"}}');var r=i(4848),l=i(8453);const s={sidebar_position:3,title:"Modeling Robots with URDF"},t="URDF: The Body Schema of a Robot",a={},d=[{value:"1. What is URDF?",id:"1-what-is-urdf",level:2},{value:"2. The Physics of Inertia",id:"2-the-physics-of-inertia",level:2},{value:"2.1 Calculating Inertia for a Box",id:"21-calculating-inertia-for-a-box",level:3},{value:"3. Anatomy of a Leg",id:"3-anatomy-of-a-leg",level:2},{value:"3.1 The XML Structure",id:"31-the-xml-structure",level:3},{value:"4. Visualizing with <code>urdf_tutorial</code>",id:"4-visualizing-with-urdf_tutorial",level:2},{value:"5. Xacro: Macros for Humanoids",id:"5-xacro-macros-for-humanoids",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"urdf-the-body-schema-of-a-robot",children:"URDF: The Body Schema of a Robot"})}),"\n",(0,r.jsx)(n.h2,{id:"1-what-is-urdf",children:"1. What is URDF?"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"URDF (Unified Robot Description Format)"})," is an XML file format used in ROS to describe all elements of a robot:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Links"}),": The rigid parts (bones) like a shin or thigh."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Joints"}),": The moving parts (connectors) like a knee or hip."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Visuals"}),": What it looks like (meshes)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Collisions"}),": Simple shapes used for physics calculations."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"2-the-physics-of-inertia",children:"2. The Physics of Inertia"}),"\n",(0,r.jsxs)(n.p,{children:["To simulate a robot accurately, Gazebo needs to know how hard it is to rotate a limb. This is the ",(0,r.jsx)(n.strong,{children:"Moment of Inertia (Tensor)"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"21-calculating-inertia-for-a-box",children:"2.1 Calculating Inertia for a Box"}),"\n",(0,r.jsx)(n.p,{children:"For a solid cuboid (width w, depth d, height h) of mass m:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Ixx = 1/12 * m * (h^2 + d^2)\nIyy = 1/12 * m * (w^2 + h^2)\nIzz = 1/12 * m * (w^2 + d^2)\n"})}),"\n",(0,r.jsxs)(n.p,{children:["If you put ",(0,r.jsx)(n.code,{children:'ixx="1.0"'}),' for a 100g finger, the simulation will explode because the physics engine sees a "black hole density" object.']}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"3-anatomy-of-a-leg",children:"3. Anatomy of a Leg"}),"\n",(0,r.jsxs)(n.p,{children:["Let's model a simple 2-DOF (Degree of Freedom) leg. It has a ",(0,r.jsx)(n.strong,{children:"Hip"})," joint and a ",(0,r.jsx)(n.strong,{children:"Knee"})," joint."]}),"\n",(0,r.jsx)(n.h3,{id:"31-the-xml-structure",children:"3.1 The XML Structure"}),"\n",(0,r.jsxs)(n.p,{children:["Create a file named ",(0,r.jsx)(n.code,{children:"simple_leg.urdf"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0"?>\n<robot name="simple_leg">\n\n  \x3c!-- MATERIALS --\x3e\n  <material name="blue">\n    <color rgba="0 0 0.8 1"/>\n  </material>\n  <material name="white">\n    <color rgba="1 1 1 1"/>\n  </material>\n\n  \x3c!-- BASE LINK (The Hip Bone) --\x3e\n  <link name="base_link">\n    <visual>\n      <geometry>\n        <cylinder length="0.1" radius="0.05"/>\n      </geometry>\n      <material name="blue"/>\n    </visual>\n  </link>\n\n  \x3c!-- UPPER LEG LINK (Thigh) --\x3e\n  <link name="upper_leg">\n    <visual>\n      <geometry>\n        <box size="0.1 0.05 0.4"/>\n      </geometry>\n      <origin xyz="0 0 -0.2" rpy="0 0 0"/>\n      <material name="white"/>\n    </visual>\n    <collision>\n      <geometry>\n        <box size="0.1 0.05 0.4"/>\n      </geometry>\n      <origin xyz="0 0 -0.2" rpy="0 0 0"/>\n    </collision>\n    <inertial>\n      <mass value="1.0"/>\n      \x3c!-- Ixx = 1/12 * 1 * (0.4^2 + 0.05^2) = 0.0135 --\x3e\n      <inertia ixx="0.0135" ixy="0.0" ixz="0.0" iyy="0.0135" iyz="0.0" izz="0.001"/>\n    </inertial>\n  </link>\n\n  \x3c!-- HIP JOINT (Connecting Base to Thigh) --\x3e\n  <joint name="hip_joint" type="revolute">\n    <parent link="base_link"/>\n    <child link="upper_leg"/>\n    <origin xyz="0 0 0" rpy="0 0 0"/>\n    <axis xyz="0 1 0"/> \x3c!-- Rotates around Y axis --\x3e\n    <limit lower="-1.57" upper="1.57" effort="10.0" velocity="1.0"/>\n  </joint>\n\n  \x3c!-- LOWER LEG LINK (Shin) --\x3e\n  <link name="lower_leg">\n    <visual>\n      <geometry>\n        <box size="0.08 0.04 0.4"/>\n      </geometry>\n      <origin xyz="0 0 -0.2" rpy="0 0 0"/>\n      <material name="blue"/>\n    </visual>\n  </link>\n\n  \x3c!-- KNEE JOINT --\x3e\n  <joint name="knee_joint" type="revolute">\n    <parent link="upper_leg"/>\n    <child link="lower_leg"/>\n    <origin xyz="0 0 -0.4" rpy="0 0 0"/> \x3c!-- Located at bottom of thigh --\x3e\n    <axis xyz="0 1 0"/>\n    <limit lower="0.0" upper="2.0" effort="10.0" velocity="1.0"/>\n  </joint>\n\n</robot>\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.h2,{id:"4-visualizing-with-urdf_tutorial",children:["4. Visualizing with ",(0,r.jsx)(n.code,{children:"urdf_tutorial"})]}),"\n",(0,r.jsx)(n.p,{children:"To see your robot, you don't need a physical machine. ROS 2 provides tools to render the XML."}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Install the tools:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo apt install ros-humble-urdf-tutorial\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Launch the display:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 launch urdf_tutorial display.launch.py model:=simple_leg.urdf\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"What you will see:"}),"\nA window (RViz) will open showing your leg. A GUI slider window (Joint State Publisher) allows you to move the ",(0,r.jsx)(n.code,{children:"hip_joint"})," and ",(0,r.jsx)(n.code,{children:"knee_joint"})," sliders and watch the leg kick in real-time."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"5-xacro-macros-for-humanoids",children:"5. Xacro: Macros for Humanoids"}),"\n",(0,r.jsx)(n.p,{children:"Writing XML for a robot with 2 arms and 2 legs (like the Unitree G1) involves copy-pasting code 4 times. This is bad practice."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Xacro (XML Macros)"})," allows you to write a function (macro) for a leg, and call it twice."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'<xacro:macro name="leg" params="prefix side">\n  <link name="${prefix}_upper_leg"> ... </link>\n  <joint name="${prefix}_hip" ...> ... </joint>\n</xacro:macro>\n\n\x3c!-- Instantiation --\x3e\n<xacro:leg prefix="left" side="1" />\n<xacro:leg prefix="right" side="-1" />\n'})}),"\n",(0,r.jsx)(n.p,{children:"This generates the full URDF automatically at runtime."})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}}}]);