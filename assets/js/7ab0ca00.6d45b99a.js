"use strict";(globalThis.webpackChunkcortex_h1=globalThis.webpackChunkcortex_h1||[]).push([[453],{7262:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"module-1-ros2/planning-decision-making","title":"1.6 Planning & Decision Making","description":"Behavior Trees in ROS 2 using BehaviorTree.CPP.","source":"@site/docs/module-1-ros2/06-planning-decision-making.md","sourceDirName":"module-1-ros2","slug":"/module-1-ros2/planning-decision-making","permalink":"/Cortex-H1/docs/module-1-ros2/planning-decision-making","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/module-1-ros2/06-planning-decision-making.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"id":"planning-decision-making","title":"1.6 Planning & Decision Making","sidebar_label":"1.6 Planning","description":"Behavior Trees in ROS 2 using BehaviorTree.CPP."},"sidebar":"textbookSidebar","previous":{"title":"1.5 Sensor Fusion","permalink":"/Cortex-H1/docs/module-1-ros2/perception-sensor-fusion"},"next":{"title":"1.7 RL Bridge","permalink":"/Cortex-H1/docs/module-1-ros2/reinforcement-learning-robotics"}}');var s=i(4848),o=i(8453);const t={id:"planning-decision-making",title:"1.6 Planning & Decision Making",sidebar_label:"1.6 Planning",description:"Behavior Trees in ROS 2 using BehaviorTree.CPP."},l="1.6 Planning & Decision Making",a={},c=[{value:"\ud83c\udfaf Lab Objectives",id:"-lab-objectives",level:2},{value:"1.6.1 The Logic (XML)",id:"161-the-logic-xml",level:2},{value:"1.6.2 The Code (C++)",id:"162-the-code-c",level:2},{value:"1.6.3 Quiz",id:"163-quiz",level:2}];function d(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"16-planning--decision-making",children:"1.6 Planning & Decision Making"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:'"Plan your work, then work your plan."'})}),"\n",(0,s.jsxs)(n.p,{children:["We use ",(0,s.jsx)(n.strong,{children:"Behavior Trees (BT)"})," for high-level logic. It's modular, readable, and standard in ROS 2 (Nav2 uses it)."]}),"\n",(0,s.jsx)(n.h2,{id:"-lab-objectives",children:"\ud83c\udfaf Lab Objectives"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Install BehaviorTree.CPP"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Create a simple Tree"}),': "Patrol" -> "Low Battery?" -> "Recharge".']}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"161-the-logic-xml",children:"1.6.1 The Logic (XML)"}),"\n",(0,s.jsxs)(n.p,{children:["Save this as ",(0,s.jsx)(n.code,{children:"main_tree.xml"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:'<root main_tree_to_execute="MainTree">\n    <BehaviorTree ID="MainTree">\n        <Fallback name="root">\n            <Sequence name="RechargeSequence">\n                <Condition ID="IsBatteryLow"/>\n                <Action ID="GoToCharger"/>\n            </Sequence>\n            <Action ID="Patrol"/>\n        </Fallback>\n    </BehaviorTree>\n</root>\n'})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Fallback"}),": Try first child (Recharge). If it fails (Battery NOT low), do second child (Patrol)."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Sequence"}),": If Battery Low (Success), THEN Go To Charger."]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"162-the-code-c",children:"1.6.2 The Code (C++)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:'#include "behaviortree_cpp_v3/bt_factory.h"\n\n// Custom Action\nclass Patrol : public BT::SyncActionNode {\n  public:\n    Patrol(const std::string& name) : BT::SyncActionNode(name, {}) {}\n    BT::NodeStatus tick() override {\n        std::cout << "Patrolling..." << std::endl;\n        return BT::NodeStatus::SUCCESS;\n    }\n};\n\n// ... (Define IsBatteryLow and GoToCharger similarly)\n\nint main() {\n    BT::BehaviorTreeFactory factory;\n    factory.registerNodeType<Patrol>("Patrol");\n    // ... register others\n    \n    auto tree = factory.createTreeFromFile("./main_tree.xml");\n    tree.tickRoot(); // Execute once\n    return 0;\n}\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"163-quiz",children:"1.6.3 Quiz"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"In a Fallback node, if Child 1 returns FAILURE, what happens?"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"a) The whole tree fails."}),"\n",(0,s.jsx)(n.li,{children:"b) It executes Child 2."}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.em,{children:"Answer: b"})}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"In a Sequence node, if Child 1 returns FAILURE, what happens?"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"a) The Sequence returns FAILURE immediately."}),"\n",(0,s.jsx)(n.li,{children:"b) It executes Child 2."}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.em,{children:"Answer: a"})}),"\n"]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>l});var r=i(6540);const s={},o=r.createContext(s);function t(e){const n=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);